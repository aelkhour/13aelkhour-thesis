\documentclass[a4paper,twoside,openright,11pt]{book}

\usepackage{setspace}
\usepackage{layout}
\usepackage{geometry}
\geometry{bindingoffset=1cm}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{tensor}
\usepackage{array}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{amstext}
\usepackage{mathtools}
\usepackage{makeidx}
\usepackage[pdftex]{graphicx}
\usepackage{epstopdf}
\usepackage{url}
\usepackage{epigraph}
\usepackage{hyperref}
\usepackage{enumitem}

\usepackage{fancyhdr}

\usepackage{hyperref}

\usepackage{type1cm}
\usepackage{lettrine}

\usepackage{color}
\usepackage{colortbl}
\usepackage{placeins}

\usepackage{multirow}
\usepackage[small]{caption}
\usepackage{subcaption}

\usepackage{titlesec}
\titleformat{\chapter}[display]
{\normalfont\bfseries\filcenter}
{\LARGE\thechapter}
{1ex}
{\titlerule[2pt]
\vspace{2ex}%
\LARGE}
[\vspace{1ex}%
{\titlerule[2pt]}]

\usepackage{appendix}

\usepackage{algorithmic, algorithm}

\usepackage[squaren, Gray, cdot]{SIunits}

\usepackage{rotating}

\usepackage{tikz, pgfplots}
\usepackage{tikz-qtree}
\usetikzlibrary{patterns}

\usepackage{import}

\renewcommand{\algorithmicrequire}{\textbf{Input:}}
\renewcommand{\algorithmicensure}{\textbf{Output:}}

% Setup pdf meta-data.
\hypersetup{ % Modifiez la valeur des champs suivants
pdfauthor = {Antonio El Khoury},
pdftitle = {Planning Optimal Motions for Anthropomorphic Systems},
pdfsubject = {Planning Optimal Motions for Anthropomorphic Systems},
pdfkeywords = {Motion Planning, Optimal Control, Anthropomorphic System, Humanoid Robot},
pdfcreator = {Antonio El Khoury},
pdfproducer = {Antonio El Khoury}
}

% Customize chapter head.
\makeatletter
\renewcommand\chapter{\if@openright\cleardoublepage\else\clearpage\fi
                    %\thispagestyle{empty}%
                    \global\@topnum\z@
                    \@afterindentfalse
                    \secdef\@chapter\@schapter}
\def\@makechapterhead#1{%
  \vspace*{50\p@}%
  {\parindent \z@ \raggedright \normalfont
    \ifnum \c@secnumdepth >\m@ne
      \if@mainmatter
        \Huge\bfseries\@chapapp~\thechapter\\\vskip 20\p@
      \fi
    \fi
    \Huge \bfseries #1\par\nobreak
    \vskip 40\p@
  }}
\makeatother

% Enforce math style.
\everymath{\displaystyle}

% Generate index.
\makeindex

% Please fancyhdr.
\pagestyle{headings}
\setlength{\headheight}{26pt}
\setlength{\footskip}{120pt}

% Align bibliography left and add some padding
\makeatletter
\renewcommand{\@biblabel}[1]{[#1]\hfill\hspace{0.cm}}
\makeatother

% Emulate abstract environment in book class
\newenvironment{abstract}{
    \onehalfspacing%
    \chapter*{\centering Abstract}%
}{}
\newenvironment{resume}{
    \onehalfspacing%
    \chapter*{\centering R\'esum\'e}%
}{}

% Custom commands.
\newcommand{\transformation}[2]{%
\ensuremath{{}^{#1}\!\text{M}_{#2}}}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}

\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\newcommand{\config}[1]{$\mathbf{q}_{#1}$}
\newcommand{\espace}{$\mathbb R^n$}
\newcommand{\task}[1]{$\mathbf{x}_{#1}$}
\newcommand{\tspace}[1]{$\mathbb R^{#1}$}
\newcommand{\wspace}{$\mathcal{WS}$}
\newcommand{\cspace}{$\mathcal{CS}$}
\newcommand{\cfree}{$\mathcal{CS}_{free}$}
\newcommand{\cobs}{$\mathcal{CS}_{obs}$}
\newcommand{\ctree}{$\mathcal{T}$}
\newcommand{\segroup}{$SE(3)$}
\newcommand{\actcspace}{$\mathcal{Q}$}
\newcommand{\robot}{$R$}
\newcommand{\body}[1]{$B_{#1}$}
\newcommand{\joint}[1]{$J_{#1}$}

\newtheorem{theorem}{Theorem}
\renewcommand{\labelitemi}{$-$}
\newcommand{\manifold}{\mathcal{M}}
\newcommand{\goalmanifold}{\mathcal{M}_{g}}

\newcommand{\state}[1]{$\mathbf{x}_{#1}$}
\newcommand{\sspace}{$\mathcal{SS}$}
\newcommand{\dotstate}[1]{$\mathbf{\dot{x}}_{#1}$}
\newcommand{\control}[1]{$\mathbf{u}_{#1}$}
\newcommand{\dfcn}[1]{$\mathbf{f}_{#1}$}
\newcommand{\eqcstr}[1]{$\mathbf{g}_{#1}$}
\newcommand{\ineqcstr}[1]{$\mathbf{h}_{#1}$}
\newcommand{\bndcstr}[1]{$\mathbf{r}_{#1}$}
\newcommand{\dotconfig}[1]{$\mathbf{\dot{q}}_{#1}$}
\newcommand{\ddotconfig}[1]{$\mathbf{\ddot{q}}_{#1}$}
\newcommand{\dddotconfig}[1]{$\mathbf{\dddot{q}}_{#1}$}

\newcommand{\argmin}[1]{\mathbf{#1}^{\star}}
\newcommand{\arginit}[1]{\mathbf{#1}_0}
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
            \node[shape=circle,draw,inner sep=1pt] (char) {#1};}}
\newcommand{\norm}[1]{\left\lVert #1 \right\rVert}
\newcommand{\overbar}[1]{\overline{#1}}
\newcommand{\downbar}[1]{\underline{#1}}
\newcommand{\equref}[1]{(\ref{#1})}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% DOCUMENT %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
\bibliographystyle{these}
%
%\layout
%\doublespacing
%\onehalfspacing
%
%
%% \thispagestyle{empty}
%% \begin{tikzpicture}[remember picture, overlay]
%%  \node[inner sep=0pt] at (current page.center) {
%%   \includegraphics[width=\paperwidth,height=\paperheight]{couverture}
%% };
%% \end{tikzpicture}
%
\frontmatter
\author{Antonio El Khoury}
\title{Planning Optimal Motions for Anthropomorphic Systems}
%\maketitle
\include{src/title-page}
%\include{src/remerciements}
%\include{src/abstract_fr}
%\include{src/abstract_en}
\tableofcontents{\thispagestyle{headings}}
%\listoffigures{\thispagestyle{headings}}
%\listoftables{\thispagestyle{headings}}
\include{src/notation-table}

%
\mainmatter
\pagestyle{empty}

% Define headers
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0pt}
\fancyhf{}
\fancyhead[LE]{\leftmark} % Chapter name on left even pages
\fancyhead[RE]{\thepage} % Page number on right even pages
\fancyhead[LO]{\rightmark} % Section name on left odd pages
\fancyhead[RO]{\thepage} % Page number on right odd pages
\fancyfoot[RO]{\includegraphics[height=60px]
  {src/romeo-walk-\intcalcInc{\intcalcMod
      {\intcalcDiv{\thepage}{2}}{10}}.png}} % Romeo on right odd pages
                                            % footer
\fancyfootoffset[RO]{\marginparwidth - \marginparsep}

\include{src/chap0-introduction/chap0-introduction}
\include{src/chap1-path-optimization/chap1-path-optimization}
\include{src/chap2-wholebody-planning/chap2-wholebody-planning}
\include{src/chap3-optimal-motion-planning/chap3-optimal-motion-planning}
\include{src/chap4-conclusion/chap4-conclusion}

\appendices
\include{src/appendix/appendix}

\backmatter

%
% Bibliography
\begin{singlespace}
\addcontentsline{toc}{chapter}{Bibliography}
\bibliography{thesis}
\end{singlespace}
%
\end{document}
